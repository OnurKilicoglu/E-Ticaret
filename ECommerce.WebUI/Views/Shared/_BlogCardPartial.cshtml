@model BlogCardViewModel

<article class="card blog-card h-100">
    <!-- Blog Image -->
    <div class="position-relative overflow-hidden">
        <img src="@Model.FeaturedImageUrl" alt="@Model.Title" class="card-img-top" 
             onerror="this.src='/images/blog-placeholder.jpg'" />
        
        @if (Model.IsFeatured)
        {
            <span class="blog-badge position-absolute top-0 start-0 m-3">
                <i class="bi bi-star-fill"></i>
                Featured
            </span>
        }
        
        <!-- Read Time Overlay -->
        <div class="read-time position-absolute bottom-0 end-0 m-3">
            <span class="badge bg-dark bg-opacity-75">
                <i class="bi bi-clock"></i>
                @Model.ReadingTime
            </span>
        </div>
    </div>
    
    <!-- Blog Content -->
    <div class="card-body d-flex flex-column">
        <!-- Blog Meta -->
        <div class="blog-meta mb-2">
            <span class="text-muted">
                <i class="bi bi-calendar3"></i>
                @Model.FormattedPublishedDate
            </span>
            <span class="text-muted">
                <i class="bi bi-person"></i>
                @Model.Author
            </span>
            @if (Model.ViewCount > 0)
            {
                <span class="text-muted">
                    <i class="bi bi-eye"></i>
                    @Model.ViewCount
                </span>
            }
        </div>
        
        <!-- Category -->
        @if (!string.IsNullOrEmpty(Model.Category))
        {
            <div class="blog-category mb-2">
                <a href="/blog/category/@Model.Category.ToLower().Replace(" ", "-")" 
                   class="badge bg-primary text-decoration-none">
                    @Model.Category
                </a>
            </div>
        }
        
        <!-- Blog Title -->
        <h5 class="card-title">
            <a href="@Model.BlogUrl" class="text-decoration-none text-dark">
                @Model.Title
            </a>
        </h5>
        
        <!-- Blog Excerpt -->
        <p class="card-text text-muted flex-grow-1">
            @Model.Excerpt
        </p>
        
        <!-- Blog Tags -->
        @if (Model.Tags.Any())
        {
            <div class="blog-tags mb-3">
                @foreach (var tag in Model.Tags.Take(3))
                {
                    <a href="/blog/tag/@tag.ToLower().Replace(" ", "-")" 
                       class="blog-tag text-decoration-none">
                        #@tag
                    </a>
                }
                @if (Model.Tags.Count > 3)
                {
                    <span class="text-muted small">+@(Model.Tags.Count - 3) more</span>
                }
            </div>
        }
        
        <!-- Read More Button -->
        <div class="mt-auto">
            <a href="@Model.BlogUrl" class="btn btn-outline-primary btn-sm">
                <i class="bi bi-arrow-right"></i>
                Read More
            </a>
            
            <!-- Social Share Buttons -->
            <div class="social-share float-end">
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-light btn-sm share-btn" 
                            data-bs-toggle="tooltip" title="Share on Facebook"
                            onclick="shareOnFacebook('@Model.BlogUrl', '@Model.Title')">
                        <i class="bi bi-facebook"></i>
                    </button>
                    <button type="button" class="btn btn-light btn-sm share-btn" 
                            data-bs-toggle="tooltip" title="Share on Twitter"
                            onclick="shareOnTwitter('@Model.BlogUrl', '@Model.Title')">
                        <i class="bi bi-twitter"></i>
                    </button>
                    <button type="button" class="btn btn-light btn-sm share-btn" 
                            data-bs-toggle="tooltip" title="Copy Link"
                            onclick="copyToClipboard('@Model.BlogUrl')">
                        <i class="bi bi-link-45deg"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</article>

<style>
    .blog-card {
        transition: all 0.3s ease;
        border: 1px solid #e2e8f0;
    }
    
    .blog-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    
    .blog-badge {
        background: rgba(245, 158, 11, 0.9);
        color: white;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.7rem;
        font-weight: 600;
    }
    
    .read-time .badge {
        font-size: 0.7rem;
    }
    
    .blog-meta {
        font-size: 0.8rem;
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }
    
    .blog-meta span {
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }
    
    .blog-category .badge {
        font-size: 0.7rem;
        font-weight: 500;
    }
    
    .card-title a:hover {
        color: #2563eb !important;
    }
    
    .blog-tag {
        background: #f1f5f9;
        color: #64748b;
        padding: 0.15rem 0.4rem;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        margin-right: 0.25rem;
        margin-bottom: 0.25rem;
        display: inline-block;
        transition: all 0.2s ease;
    }
    
    .blog-tag:hover {
        background: #2563eb;
        color: white;
    }
    
    .social-share .btn {
        padding: 0.25rem 0.5rem;
        font-size: 0.8rem;
        border: 1px solid #e2e8f0;
    }
    
    .share-btn:hover {
        background: #f8fafc;
        transform: translateY(-1px);
    }
</style>

<script>
    // Social sharing functions
    function shareOnFacebook(url, title) {
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank', 'width=600,height=400');
    }
    
    function shareOnTwitter(url, title) {
        window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`, '_blank', 'width=600,height=400');
    }
    
    function copyToClipboard(url) {
        navigator.clipboard.writeText(url).then(function() {
            // Show success message
            const toast = `
                <div class="toast show position-fixed top-0 end-0 m-3" role="alert">
                    <div class="toast-header bg-success text-white">
                        <i class="bi bi-check-circle me-2"></i>
                        <strong class="me-auto">Success</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                    </div>
                    <div class="toast-body">
                        Link copied to clipboard!
                    </div>
                </div>
            `;
            $('body').append(toast);
            setTimeout(() => $('.toast').last().remove(), 3000);
        });
    }
</script>

