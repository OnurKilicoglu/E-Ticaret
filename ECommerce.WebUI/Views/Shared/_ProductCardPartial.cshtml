@model ProductCardViewModel

<div class="card product-card h-100">
    <!-- Product Image -->
    <div class="position-relative overflow-hidden">
        <img src="@Model.ImageUrl" alt="@Model.Name" class="card-img-top" 
             onerror="this.src='/images/product-placeholder.jpg'" />
        
        <!-- Product Badges -->
        @if (Model.HasDiscount)
        {
            <span class="product-badge badge-sale">
                -@Model.DiscountPercentage%
            </span>
        }
        else if (Model.IsFeatured)
        {
            <span class="product-badge badge-featured">
                Featured
            </span>
        }
        else if (Model.IsNew)
        {
            <span class="product-badge badge-new">
                New
            </span>
        }
        
        <!-- Quick Action Buttons -->
        <div class="product-actions position-absolute top-0 end-0 p-2">
            <div class="btn-group-vertical">
                <button class="btn btn-light btn-sm rounded-circle add-to-wishlist-btn" 
                        title="Add to Wishlist"
                        data-product-id="@Model.Id" 
                        data-product-name="@Model.Name">
                    <i class="bi bi-heart"></i>
                </button>
                <button class="btn btn-light btn-sm rounded-circle mt-1" title="Quick View" 
                        data-bs-toggle="modal" data-bs-target="#quickViewModal" 
                        data-product-id="@Model.Id">
                    <i class="bi bi-eye"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Product Info -->
    <div class="card-body d-flex flex-column">
        <!-- Category -->
        <div class="product-category mb-1">
            <small class="text-muted">@Model.CategoryName</small>
        </div>
        
        <!-- Product Name -->
        <h5 class="card-title">
            <a href="@Model.ProductUrl" class="text-decoration-none text-dark">
                @Model.Name
            </a>
        </h5>
        
        <!-- Product Description -->
        <p class="card-text text-muted small flex-grow-1">
            @Model.ShortDescription
        </p>
        
        <!-- Product Price -->
        <div class="product-price mb-3">
            @if (Model.HasDiscount)
            {
                <span class="h6 text-danger mb-0">@Model.FormattedDiscountPrice</span>
                <span class="product-price-original ms-2">@Model.FormattedPrice</span>
                <div class="product-discount small">
                    Save @((Model.Price - Model.DiscountPrice!.Value).ToString("C"))
                </div>
            }
            else
            {
                <span class="h6 text-primary mb-0">@Model.FormattedPrice</span>
            }
        </div>
        
        <!-- Stock Status -->
        <div class="stock-status mb-3">
            <span class="badge bg-@Model.StockBadgeClass">
                <i class="bi bi-@(Model.InStock ? "check-circle" : "x-circle")"></i>
                @Model.StockStatus
            </span>
            @if (Model.InStock && Model.StockQuantity <= 5)
            {
                <small class="text-warning ms-2">Only @Model.StockQuantity left!</small>
            }
        </div>
        
        <!-- Action Buttons -->
        <div class="product-buttons mt-auto">
            @if (Model.InStock)
            {
                <div class="d-grid gap-2">
                    <button class="btn btn-primary btn-add-to-cart" 
                            data-product-id="@Model.Id" 
                            data-product-name="@Model.Name"
                            data-product-price="@(Model.HasDiscount ? Model.DiscountPrice : Model.Price)">
                        <i class="bi bi-cart-plus"></i>
                        Add to Cart
                    </button>
                    <a href="@Model.ProductUrl" class="btn btn-outline-secondary btn-sm">
                        <i class="bi bi-eye"></i>
                        View Details
                    </a>
                </div>
            }
            else
            {
                <div class="d-grid gap-2">
                    <button class="btn btn-secondary" disabled>
                        <i class="bi bi-x-circle"></i>
                        Out of Stock
                    </button>
                    <a href="@Model.ProductUrl" class="btn btn-outline-secondary btn-sm">
                        <i class="bi bi-eye"></i>
                        View Details
                    </a>
                </div>
            }
        </div>
    </div>
</div>

<style>
    .product-card {
        transition: all 0.3s ease;
        border: 1px solid #e2e8f0;
    }
    
    .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    .product-actions {
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .product-card:hover .product-actions {
        opacity: 1;
    }
    
    .product-badge {
        position: absolute;
        top: 0.75rem;
        left: 0.75rem;
        z-index: 2;
        font-size: 0.7rem;
        font-weight: 600;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
    }
    
    .badge-new {
        background: #10b981;
        color: white;
    }
    
    .badge-sale {
        background: #ef4444;
        color: white;
    }
    
    .badge-featured {
        background: #f59e0b;
        color: white;
    }
    
    .product-category a {
        color: #64748b;
        text-decoration: none;
        font-size: 0.8rem;
    }
    
    .product-category a:hover {
        color: #2563eb;
    }
    
    .card-title a:hover {
        color: #2563eb !important;
    }
    
    .btn-add-to-cart:hover {
        transform: translateY(-1px);
    }
    
    .stock-status .badge {
        font-size: 0.7rem;
    }
</style>

